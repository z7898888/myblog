{% extends 'user.html' %}

{% block title %}用户{% endblock %}

{% block beforehead %}
<script src="/static/js/vue.js"></script>
<script>
$(function () {
	{% if index %}
	getBlogsByPage('/api/blogs-date',{{index}},10);
	{% else %}
	getBlogsByPage('/api/blogs-date',1,10);
	{% endif %}
});
</script>
{% endblock %}

{% block blog_content %}
<div id='div-blogs' class='uk-width-1-1' style='display:none'>
	<table class='uk-table uk-table-hover'>
		<thead>
			<tr>
				<th class='uk-width-5-10'>标题</th>
				<th class='uk-width-3-10'>创建时间</th>
				<th class='uk-width-2-10'>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr v-for='blog in blogs'>
				<td>
					<a target='_blank' v-bind:href="'/blog/'+blog.id"  v-text="blog.title"></a>
				</td>
				<td>
					<span v-text='blog.created_at'></span>
				</td>
				<td>
					<a v-bind:href="'/manage/blog/edit/'+blog.id"><i class='uk-icon-edit'></i></a>
					<a v-on:click='del(blog.id)'><i class='uk-icon-trash'></i></a>
				</td>
			</tr>
		</tbody>
	</table>
	<div class='uk-width-1-1 uk-text-center'>
		<ul class='uk-pagination'>
			<li v-if="!page.has_previous" class="uk-disabled"><span><i class="uk-icon-angle-double-left"></i></span></li>
			<li v-if="page.has_previous"><a v-bind:href="'/manage/blog?page_index='+previous()+'&page_size=10'"><i class='uk-icon-angle-double-left'></i></a></li>
			<li class="uk-active"><span v-text="page.page_index"></span></li>
			<li v-if="!page.has_next" class="uk-disabled"><span><i class='uk-icon-angle-double-right'></i></span></li>
			<li v-if="page.has_next"><a v-bind:href="'/manage/blog?page_index='+next()+'&page_size=10'"><i class='uk-icon-angle-double-right'></i></a></li>
		</ul>
	</div>
</div>
{% endblock %}
