{% extends 'user.html' %}

{% block title %}用户{% endblock %}

{% block beforehead %}
<script>
var api_blogs = "{{api}}";
var num = 2;
$(function () {
	getBlogsByPage( api_blogs ,1 ,num);
});
</script>
{% endblock %}

{% block blog_content %}
<div id='div-blogs' class='uk-width-1-1' style='display:none'>
	<table class='uk-table uk-table-hover'>
		<thead>
			<tr>
				<th class='uk-width-5-10'>标题</th>
				<th class='uk-width-3-10'>创建时间</th>
				<th class='uk-width-2-10'>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr v-for='blog in blogs'>
				<td>
					<a target='_blank' v-bind:href="'/blog/'+blog.id"  v-text="blog.title"></a>
				</td>
				<td>
					<span v-text='blog.created_at'></span>
				</td>
				<td>
					<a v-bind:href="'/manage/blog/edit/'+blog.id"><i class='uk-icon-edit'></i></a>
					<a v-on:click='del(blog.id)'><i class='uk-icon-trash'></i></a>
				</td>
			</tr>
		</tbody>
	</table>
	<div class='uk-width-1-1 uk-text-center'>
		<ul class='uk-pagination'>
			<li v-if="!page.has_previous" class="uk-disabled"><span><i class="uk-icon-angle-double-left"></i></span></li>
			<li v-if="page.has_previous"><a href="javascript:getBlogsByPage( api_blogs, vm.previous(), num);"><i class='uk-icon-angle-double-left'></i></a></li>
			<li class="uk-active"><span v-text="page.page_index"></span></li>
			<li v-if="!page.has_next" class="uk-disabled"><span><i class='uk-icon-angle-double-right'></i></span></li>
			<li v-if="page.has_next"><a href="javascript:getBlogsByPage( api_blogs , vm.next() , num);"><i class='uk-icon-angle-double-right'></i></a></li>
		</ul>
	</div>
</div>
{% endblock %}
